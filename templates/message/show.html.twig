{% extends 'layout.html.twig' %}

{% block title %}Message
{% endblock %}

{% block body %}
<div class="container">
	<h1>{{subject.title}}</h1>

	
		<a href="{{ path('subject_index') }}">back to list</a>
	
			<div class="card w-75">
				{% for message in subject.messages %}
				<div class="card-body">
					<h5 class="card-title">Card title</h5>
					<img class="avatar" src="/uploads/{{ message.author.avatar }}">
					<span>{{ message.author.pseudo }}</span>
					<span>{{ message.createdAt ? message.createdAt|date('Y-m-d H:i:s') : '' }}</span>
					<p class="card-text">
						{{ message.content|raw }}
					</p>
					<a class="btn btn-link js-like" href="{{ path('like_message',{'id': message.id}) }}">
										{% if app.user and message.isLikedByUser(app.user) %}
											<i class="fas fa-thumbs-up"></i>
										{% else %}
											<i class="far fa-thumbs-up"></i>
										{% endif %}

										<span class="js-likes">{{ message.messageLikes | length }}</span>
										<a href="{{ path('response_new', {'id': message.id}) }}">Répondre à {{ message.author.pseudo }}</a>

					{# <a href="{{ path('message_edit', {'id': message.id}) }}">edit</a>
					{{ include('message/_delete_form.html.twig') }}
					 #}
			</div>
			<hr>
			{% endfor %}
			</div>
			<a href="{{ path('response_new', {'id': subject.id }) }}" class="btn btn-primary">Répondre</a>

	</div>
{% endblock %}
{% block javascripts %}
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script type="text/javascript" src="/js/like.js"></script>

{% endblock %}
